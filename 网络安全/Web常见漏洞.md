### 0x00 Web常见漏洞
包含了常见的Web漏洞，如SQL注入、XSS、文件上传漏洞、文件包含漏洞、命令执行漏洞、代码执行漏洞、CSRF、SSRF、JSONP漏洞、越权漏洞、反序列化漏洞、任意文件下载、任意文件读取、目录遍历、URL重定向、XXE漏洞、xpath注入漏洞、cookie绕过漏洞和session绕过漏洞等。以下简短记录了漏洞原理、漏洞检测、如何利用以及如何进行防御，具体的漏洞利用高阶请参考具体文档。
### 0x01 SQL注入漏洞
Web程序代码中对用户提交的参数未做过滤就直接放到SQL语句中去执行，导致参数中的特殊字符打破了SQL语句的原有逻辑，攻击者可以利用该漏洞执行任意SQL语句，如查询数据、下载数据、写入Webshell以及执行系统命令等。

### 0x02 SQL注入漏洞检测
工具：在发现有可控参数的地方使用sqlmap进行sql注入的检查或者利用，也可以使用其他的sql注入工具；
手工：利用单引号，and 1=1，and 1=2以及字符型注入进行判断，可以使用burp的sqlmap插件进行检测。

### 0x03 SQL注入利用方法
1. 查询数据&&下载数据；
2. 写入Webshell；
3. 执行系统命令；
4. 绕过登录限制；

### 0x04 SQL注入防御方法
1. 代码层防御：最佳防御sql漏洞方案就是采用sql语句预编译和绑定变量；
2. 使用参数化查询接口，参数化的语句使用参数而不是将用户输入变量嵌入到sql语句中；
3. 对进入数据库的特殊字符进行转义或编码处理；
4. 限制网站用户的数据库操作权限；
5. 网站的每个数据层编码统一，建议全部使用UTF-8编码；
6. 确定好每种数据的数据类型；
7. 避免网站显示sql错误信息，比如类型错误、字段不匹配等，防止攻击者利用错误信息进行一些判断。
### 0x05 文件上传漏洞
文件上传漏洞是指，由于程序员未对上传的文件做严格的验证和文件名过滤，导致用户可以越过其本身权限向服务器上传可执行的动态脚本文件。常见的包括图片上传和OA办公文件上传等，这些接口如果过滤不严格，攻击者利用文件上传漏洞，上传可执行脚本文件到服务器中，就可以获取服务器权限，或进一步危害服务器。
### 0x06 文件上传漏洞检测
需要找到Web站点的文件上传模块，通过抓包上传恶意文件进行测试，查看返回包判断恶意文件能否直接上传。
1. 尝试上传可执行文件，看服务器是否限制了文件类型。然后使用双扩展名或伪造扩展名，测试服务器是否只根据扩展名来判断文件类型；
2. 文件内容验证：上传图片或文本文件，在其中插入恶意代码，观察服务器是否进行内容验证或过滤；
3. 测试文件名验证机制：使用特殊字符进行文件名绕过；
4. 访问上传文件：如果上传文件成功后返回一个URL，尝试直接访问该文件。确认服务器是否将其保存在可直接访问的路径下。如果文件可执行，说明存在漏洞。
